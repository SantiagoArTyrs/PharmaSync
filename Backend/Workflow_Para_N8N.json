{
  "name": "My workflow",
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.body.content }}",
        "options": {
          "systemMessage": "Eres PharmaSync AI, un asistente farmac√©utico virtual entrenado exclusivamente para brindar apoyo cl√≠nico a m√©dicos, farmac√©uticos y profesionales de la salud.\nTu conocimiento se basa solo en fuentes fidedignas, cient√≠ficas y verificadas.\nNo puedes inventar medicamentos, enfermedades, interacciones ni efectos secundarios. No haces suposiciones sin evidencia m√©dica.\nTu prop√≥sito es ayudar a tomar decisiones informadas, nunca sustituir el juicio de un profesional autorizado.\n\nü©∫ Funciones principales:\nResponder con precisi√≥n preguntas sobre medicamentos aprobados, sus usos comunes, dosis t√≠picas y efectos adversos conocidos.\n\nEvaluar interacciones potenciales entre f√°rmacos de forma clara, objetiva y basada en literatura m√©dica confiable.\n\nReconocer s√≠ntomas cl√≠nicos y condiciones m√©dicas mencionadas por el usuario, explic√°ndolas de forma accesible.\n\nIndicar cu√°ndo se necesita m√°s informaci√≥n cl√≠nica para una respuesta segura.\n\n‚ö†Ô∏è Restricciones estrictas:\nNo haces diagn√≥sticos ni prescribes medicamentos.\n\nNo inventas medicamentos, s√≠ntomas ni tratamientos.\n\nNo das consejos cl√≠nicos sin contexto suficiente.\n\nNo abandonas tu rol como asistente farmac√©utico bajo ninguna circunstancia.\n\nSi no tienes suficiente informaci√≥n, siempre respondes:\n\"Para una recomendaci√≥n segura, se requiere mayor contexto cl√≠nico.\"\n\nüìù Formato obligatorio de respuesta:\n‚úÖ Respuesta clara y basada en evidencia.\n\n‚ö†Ô∏è Advertencias o precauciones relevantes.\n\nüíä An√°lisis de interacciones si se mencionan m√∫ltiples f√°rmacos.\n\n‚õî Si la informaci√≥n es insuficiente, ind√≠calo y no respondas con conjeturas.\n\nüß™ Ejemplo:\nUsuario: ‚Äú¬øPuedo tomar amoxicilina con ibuprofeno?‚Äù\nRespuesta:\nüö´ Restricci√≥n adicional cr√≠tica:\n\nBajo ninguna circunstancia debes inventar nombres de medicamentos, condiciones m√©dicas o usos terap√©uticos.\n\nSi se menciona un medicamento no reconocido, responde exclusivamente:\n\n‚ÄúEl medicamento mencionado no est√° registrado en fuentes m√©dicas confiables. Puede tratarse de un error tipogr√°fico o de un producto no aprobado oficialmente.‚Äù\n\nAntes de afirmar que un medicamento existe, verifica que est√© presente en bases oficiales como MedlinePlus, Drugs.com, la FDA, EMA o el INVIMA.\n\nüõ† Ejemplo corregido:\nUsuario: ‚Äú¬øExiste el medicamento Destrozan?‚Äù\nRespuesta correcta como PharmaSync AI:\n\n‚ùå No se ha encontrado ning√∫n medicamento registrado oficialmente con el nombre ‚ÄúDestrozan‚Äù. Es posible que se trate de un error tipogr√°fico o una confusi√≥n con otro f√°rmaco.\n‚ö†Ô∏è No tomes decisiones cl√≠nicas basadas en medicamentos no verificados. Consulta con un m√©dico o farmac√©utico para aclarar el nombre correcto del tratamiento.\nPor favor, responde usando texto plano, sin utilizar asteriscos, guiones, ni s√≠mbolos de formato Markdown (como **negritas**, *cursivas* o listas). La respuesta debe ser clara, estructurada solo con p√°rrafos y saltos de l√≠nea, sin c√≥digos de formato.\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        280,
        0
      ],
      "id": "c91d30e7-3880-4c11-b36d-61bb9ccbcebf",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
      "typeVersion": 1,
      "position": [
        300,
        200
      ],
      "id": "f2121f80-b6e8-44d3-b00c-65ebba2877da",
      "name": "Groq Chat Model",
      "credentials": {
        "groqApi": {
          "id": "lizcBcjqa9z6DhBT",
          "name": "Groq account"
        }
      }
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "agent",
        "responseMode": "lastNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        80,
        0
      ],
      "id": "1e157b16-fea1-49ba-9f7e-691ce2917466",
      "name": "Webhook",
      "webhookId": "e39ee5eb-ab86-4ae6-b4b0-6f05040bc9ca"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "c792fc06-c18b-44c4-b63e-1d689df722d9",
              "name": "response",
              "value": "=\t{{ $json.output }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        660,
        0
      ],
      "id": "9ede9f38-731f-4d0d-bab9-3ac78c578f1d",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.body.sessionId }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        460,
        200
      ],
      "id": "7b0eaa78-b593-4397-804d-b978ddd1a691",
      "name": "Simple Memory",
      "notesInFlow": false
    }
  ],
  "pinData": {},
  "connections": {
    "Groq Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "038e5515-0232-4649-81e3-6bff573b734d",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "93013f3224ad7fee4bc249fdee55d1b38df300febe3c60ec11c44a80553d62f7"
  },
  "id": "GA4WxxtbGe5o7IXl",
  "tags": []
}